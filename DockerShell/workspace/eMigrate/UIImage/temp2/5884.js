"use strict";(self.webpackChunke_migrate=self.webpackChunke_migrate||[]).push([[5884],{5884:(lt,T,n)=>{n.r(T),n.d(T,{UpdateRcDetailsModule:()=>rt});var u=n(6895),p=n(1358),U=n(6270),o=n(4006),I=n(4247),C=n(3599),c=n(2976),t=n(1571),b=n(805);let F=(()=>{var a;class r{constructor(i){this.fb=i}createFetchRaDetails(){return this.fb.group({raId:this.fb.control({value:null,disabled:!1},o.kI.compose([o.kI.required,p.YO.raIdValidator()]))})}createRaDetails(i){return this.fb.group({praRaId:this.fb.control({value:null,disabled:!1},o.kI.required),praRcNumber:this.fb.control({value:null,disabled:!1}),praRcExpDate:this.fb.control({value:"",disabled:!1}),praRcExpDateCond:this.fb.control({value:"",disabled:!1}),praCapacity:this.fb.control({value:"",disabled:!1}),praRcHolder:this.fb.control({value:"",disabled:!1}),padEmail:this.fb.control({value:"",disabled:!1}),padLandlineNum:this.fb.control({value:"",disabled:!1}),padMobileNum:this.fb.control({value:"",disabled:!1}),pdtOrganisationName:this.fb.control({value:"",disabled:!1},o.kI.required),pdtWebsiteUrl:this.fb.control({value:"",disabled:!1}),partnerDirectors:[]})}createRaDetailsList(){return this.fb.group({praRaId:this.fb.control({value:null,disabled:!0}),praRcNumber:this.fb.control({value:null,disabled:!0}),praRcExpDate:this.fb.control({value:"",disabled:!0}),praRcExpDateCond:this.fb.control({value:"",disabled:!0}),praCapacity:this.fb.control({value:"",disabled:!0}),praRcHolder:this.fb.control({value:"",disabled:!0}),padEmail:this.fb.control({value:"",disabled:!0},o.kI.compose([p.YO.emailValidator()])),padLandlineNum:this.fb.control({value:"",disabled:!0},o.kI.compose([p.YO.phoneNumberValidator()])),padMobileNum:this.fb.control({value:"",disabled:!0},o.kI.compose([p.YO.mobileNumberValidator()])),pdtOrganisationName:this.fb.control({value:"",disabled:!0}),pdtWebsiteUrl:this.fb.control({value:"",disabled:!0},o.kI.compose([p.YO.websiteUrlValidator()])),partnerDirectors:[]})}}return(a=r).\u0275fac=function(i){return new(i||a)(t.LFG(o.qu))},a.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),r})();var m,f=n(655),D=n(8505),R=n(262),g=n(8513);class h{constructor(r){this.updateRcDetailsService=r}getRaId(r){return this.updateRcDetailsService.getRaIdDetails(r).pipe((0,D.b)(e=>{}),(0,R.K)(e=>{throw e}))}updateRcDetails(r){return this.updateRcDetailsService.updateRcDetails(r).pipe((0,D.b)(e=>{}),(0,R.K)(e=>{throw e}))}validateEmail(r){return this.updateRcDetailsService.validateEmaiId(r).pipe((0,D.b)(()=>{}),(0,R.K)(e=>{throw e}))}validatePhoneNumber(r){return this.updateRcDetailsService.validatePhoneNumber(r).pipe((0,D.b)(()=>{}),(0,R.K)(e=>{throw e}))}}(m=h).\u0275fac=function(r){return new(r||m)(t.LFG(c.KNN))},m.\u0275prov=t.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),(0,f.gn)([(0,g.PS)()],h.prototype,"getRaId",null),(0,f.gn)([(0,g.PS)()],h.prototype,"updateRcDetails",null),(0,f.gn)([(0,g.PS)()],h.prototype,"validateEmail",null),(0,f.gn)([(0,g.PS)()],h.prototype,"validatePhoneNumber",null);var A=n(6945),S=n(5593),w=n(2453),_=n(1740);let J=(()=>{var a;class r{}return(a=r).\u0275fac=function(i){return new(i||a)},a.\u0275cmp=t.Xpm({type:a,selectors:[["emigrate-fetch-ra-details"]],inputs:{fetchRaDetails:"fetchRaDetails"},decls:6,vars:4,consts:[[1,"row","p-3"],[1,"col-md-6","col-sm-6"],[3,"formGroup"],[1,"field"],["for","raId","inputLabel","RA ID","inputId","raid",1,"block",3,"inputRequired","inputFormControl"],["id","raId","type","text","pInputText","","placeholder","e.g.RA12345",3,"formControl"]],template:function(i,s){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"form",2)(3,"div",3)(4,"emigrate-sh-html-input",4),t._UZ(5,"input",5),t.qZA()()()()()),2&i&&(t.xp6(2),t.Q6J("formGroup",s.fetchRaDetails),t.xp6(2),t.Q6J("inputRequired",!0)("inputFormControl",s.fetchRaDetails.controls.raId),t.xp6(1),t.Q6J("formControl",s.fetchRaDetails.controls.raId))},dependencies:[p.KR,_.o,o._Y,o.Fj,o.JJ,o.JL,o.oH,o.sg]}),r})(),L=(()=>{var a;class r{}return(a=r).\u0275fac=function(i){return new(i||a)},a.\u0275cmp=t.Xpm({type:a,selectors:[["emigrate-ra-details"]],inputs:{raDetailsForm:"raDetailsForm"},decls:18,vars:13,consts:[[3,"formGroup"],[1,"row","p-3"],[1,"col-md-6","col-sm-6"],[1,"field"],["for","raid","inputLabel","RA ID",1,"block",3,"inputFormControl","inputRequired"],["id","raid","readonly","true","type","text","pInputText","","placeholder","raid",3,"formControl"],["for","expiryDate","inputLabel","Expiry Date","inputId","expiryDate",1,"block",3,"inputFormControl","inputRequired"],["id","expiryDate","type","text","readonly","true","pInputText","","placeholder","expiryDate",3,"formControl"],["for","raName","inputLabel","Recruiting Agent(RA) Name","inputId","raName",1,"block",3,"inputFormControl","inputRequired"],["id","raName","type","text","pInputText","","readonly","true","placeholder","raName",3,"formControl"],["for","rcno","inputLabel","RC Number","inputId","raid",1,"block",3,"inputFormControl","inputRequired"],["id","rcno","type","text","pInputText","","readonly","true","placeholder","rcno",3,"formControl"]],template:function(i,s){1&i&&(t.TgZ(0,"form",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"emigrate-sh-html-input",4),t._UZ(5,"input",5),t.qZA()()(),t.TgZ(6,"div",2)(7,"div",3)(8,"emigrate-sh-html-input",6),t._UZ(9,"input",7),t.qZA()()(),t.TgZ(10,"div",2)(11,"div",3)(12,"emigrate-sh-html-input",8),t._UZ(13,"input",9),t.qZA()()(),t.TgZ(14,"div",2)(15,"div",3)(16,"emigrate-sh-html-input",10),t._UZ(17,"input",11),t.qZA()()()()()),2&i&&(t.Q6J("formGroup",s.raDetailsForm),t.xp6(4),t.Q6J("inputFormControl",s.raDetailsForm.controls.praRaId)("inputRequired",!0),t.xp6(1),t.Q6J("formControl",s.raDetailsForm.controls.praRaId),t.xp6(3),t.Q6J("inputFormControl",s.raDetailsForm.controls.praRcExpDate)("inputRequired",!0),t.xp6(1),t.Q6J("formControl",s.raDetailsForm.controls.praRcExpDate),t.xp6(3),t.Q6J("inputFormControl",s.raDetailsForm.controls.pdtOrganisationName)("inputRequired",!0),t.xp6(1),t.Q6J("formControl",s.raDetailsForm.controls.pdtOrganisationName),t.xp6(3),t.Q6J("inputFormControl",s.raDetailsForm.controls.praRcNumber)("inputRequired",!0),t.xp6(1),t.Q6J("formControl",s.raDetailsForm.controls.praRcNumber))},dependencies:[p.KR,_.o,o._Y,o.Fj,o.JJ,o.JL,o.oH,o.sg]}),r})();var Z=n(2210),x=n(4826),y=n(8645);function N(a,r){1&a&&(t.TgZ(0,"tr")(1,"th"),t._uU(2,"Check List"),t.qZA(),t.TgZ(3,"th"),t._uU(4,"RA Details"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Current Value"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Value to be updated"),t.qZA()())}function E(a,r){if(1&a&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&a){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.currentValue," ")}}function k(a,r){if(1&a&&(t.TgZ(0,"td"),t._uU(1),t.ALo(2,"date"),t.qZA()),2&a){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.currentValue,"dd/MM/yyyy ")," ")}}function Q(a,r){if(1&a&&(t.TgZ(0,"td")(1,"emigrate-sh-html-input",8),t._UZ(2,"input",9),t.qZA()()),2&a){const e=t.oxw().$implicit,i=t.oxw();t.xp6(1),t.Q6J("inputFormControl",i.raDetailsListForm.get(e.key)),t.xp6(1),t.Q6J("formControl",i.raDetailsListForm.get(e.key))}}function q(a,r){if(1&a&&(t.TgZ(0,"td")(1,"emigrate-sh-html-input",10),t._UZ(2,"p-calendar",11),t.qZA()()),2&a){const e=t.oxw().$implicit,i=t.oxw();t.xp6(1),t.Q6J("inputFormControl",i.raDetailsListForm.get(e.key)),t.xp6(1),t.Q6J("formControl",i.raDetailsListForm.get(e.key))}}function V(a,r){if(1&a&&(t.TgZ(0,"td")(1,"emigrate-sh-html-input",12),t._UZ(2,"p-dropdown",13),t.qZA()()),2&a){const e=t.oxw().$implicit,i=t.oxw();t.xp6(1),t.Q6J("inputFormControl",i.raDetailsListForm.get(e.key)),t.xp6(1),t.Q6J("options",i.raDetailsForm.value.partnerDirectors)("formControl",i.raDetailsListForm.get(e.key))}}function M(a,r){if(1&a&&(t.TgZ(0,"tr")(1,"td"),t._UZ(2,"p-tableCheckbox",6),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.YNc(5,E,2,1,"td",7),t.YNc(6,k,3,4,"td",7),t.YNc(7,Q,3,2,"td",7),t.YNc(8,q,3,2,"td",7),t.YNc(9,V,3,3,"td",7),t.qZA()),2&a){const e=r.$implicit;t.xp6(2),t.Q6J("value",e),t.xp6(2),t.Oqu(e.raDetails),t.xp6(1),t.Q6J("ngIf",2!==e.id&&3!==e.id),t.xp6(1),t.Q6J("ngIf",2===e.id||3===e.id),t.xp6(1),t.Q6J("ngIf",2!==e.id&&3!==e.id&&5!==e.id),t.xp6(1),t.Q6J("ngIf",2===e.id||3===e.id),t.xp6(1),t.Q6J("ngIf",5===e.id)}}let Y=(()=>{var a;class r{constructor(i){this.helperService=i,this.selectedItem=new t.vpe,this.reassignArr=[]}ngOnInit(){this.createViewRaDetails(this.raDetailsForm.value)}get controlNames(){return Object.keys(this.raDetailsListForm.controls)}onRowSelect(i){this.raDetailsListForm.get(i.data.key).enable(),i.data.isDisabled=!1,this.reassignArr.push(i.data),this.selectedItem.emit(this.reassignArr)}onRowUnselect(i){i.data.isDisabled=!0,this.raDetailsListForm.get(i.data.key).disable(),this.raDetailsListForm.get(i.data.key).setValue(null),function s(l,d){const v=l.findIndex(ot=>ot.id===d);v>-1&&l.splice(v,1)}(this.reassignArr,i.data.id),this.selectedItem.emit(this.reassignArr)}createViewRaDetails(i){this.viewRaDetails=[{id:9,raDetails:"RA Name",currentValue:i.pdtOrganisationName,updatedValue:null,isDisabled:!0,key:"pdtOrganisationName"},{id:1,raDetails:"RC Number",currentValue:i.praRcNumber,updatedValue:null,isDisabled:!0,key:"praRcNumber"},{id:2,raDetails:"RC Expiry Date",currentValue:i.praRcExpDate,updatedValue:null,isDisabled:!0,key:"praRcExpDate"},{id:3,raDetails:"RC Expiry Date (Conditional)",currentValue:i.praRcExpDateCond,updatedValue:null,isDisabled:!0,key:"praRcExpDateCond"},{id:6,raDetails:"Email Address",currentValue:i.padEmail,updatedValue:null,isDisabled:!0,key:"padEmail"},{id:7,raDetails:"Landline Number",currentValue:i.padLandlineNum,updatedValue:null,isDisabled:!0,key:"padLandlineNum"},{id:8,raDetails:"Mobile Number",currentValue:i.padMobileNum,updatedValue:null,isDisabled:!0,key:"padMobileNum"},{id:10,raDetails:"Website URL",currentValue:i.pdtWebsiteUrl,updatedValue:null,isDisabled:!0,key:"pdtWebsiteUrl"},{id:4,raDetails:"Capacity",currentValue:i.praCapacity,updatedValue:null,isDisabled:!0,key:"praCapacity"},{id:5,raDetails:"RC Holder Name",currentValue:i.praRcHolder,updatedValue:null,isDisabled:!0,key:"praRcHolder"}]}}return(a=r).\u0275fac=function(i){return new(i||a)(t.Y36(F))},a.\u0275cmp=t.Xpm({type:a,selectors:[["emigrate-update-ra-details-list"]],inputs:{raDetailsForm:"raDetailsForm",raDetailsListForm:"raDetailsListForm"},outputs:{selectedItem:"selectedItem"},decls:6,vars:3,consts:[[1,"col-md-12","col-sm-6"],[1,"table-border"],[3,"formGroup"],["dataKey","id",3,"value","selection","selectionChange","onRowSelect","onRowUnselect"],["pTemplate","header"],["pTemplate","body"],[3,"value"],[4,"ngIf"],["for","updatedValue",1,"block",3,"inputFormControl"],["type","text","pInputText","",2,"min-width","100%",3,"formControl"],["for","updatedDate",1,"block",3,"inputFormControl"],["appendTo","body","dateFormat","dd/mm/yy",3,"formControl"],["for","dropdownData",1,"block",3,"inputFormControl"],["id","viewRaDetails.id","placeholder","Select an option","EmigrateShDropdown","",3,"options","formControl"]],template:function(i,s){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"form",2)(3,"p-table",3),t.NdJ("selectionChange",function(d){return s.selectedProducts3=d})("onRowSelect",function(d){return s.onRowSelect(d)})("onRowUnselect",function(d){return s.onRowUnselect(d)}),t.YNc(4,N,9,0,"ng-template",4),t.YNc(5,M,10,7,"ng-template",5),t.qZA()()()()),2&i&&(t.xp6(2),t.Q6J("formGroup",s.raDetailsListForm),t.xp6(1),t.Q6J("value",s.viewRaDetails)("selection",s.selectedProducts3))},dependencies:[u.O5,p.KR,p.lC,b.jx,Z.Lt,_.o,x.iA,x.UA,y.f,o._Y,o.Fj,o.JJ,o.JL,o.oH,o.sg,u.uU]}),r})();function H(a,r){1&a&&(t.TgZ(0,"tr")(1,"th"),t._uU(2,"RA Details"),t.qZA(),t.TgZ(3,"th"),t._uU(4,"Current Value"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Value to be updated"),t.qZA()())}function O(a,r){if(1&a&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&a){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.currentValue)}}function P(a,r){if(1&a&&(t.TgZ(0,"td"),t._uU(1),t.ALo(2,"date"),t.qZA()),2&a){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.currentValue,"dd/MM/yyyy ")," ")}}function K(a,r){if(1&a&&(t.TgZ(0,"td")(1,"emigrate-sh-html-input",7),t._UZ(2,"input",8),t.qZA()()),2&a){const e=t.oxw().$implicit,i=t.oxw();t.xp6(1),t.Q6J("inputFormControl",i.raDetailsListForm.get(e.key)),t.xp6(1),t.Q6J("formControl",i.raDetailsListForm.get(e.key))}}function G(a,r){if(1&a&&(t.TgZ(0,"td")(1,"emigrate-sh-html-input",9),t._UZ(2,"p-calendar",10),t.qZA()()),2&a){const e=t.oxw().$implicit,i=t.oxw();t.xp6(1),t.Q6J("inputFormControl",i.raDetailsListForm.get(e.key)),t.xp6(1),t.Q6J("formControl",i.raDetailsListForm.get(e.key))}}function j(a,r){if(1&a&&(t.TgZ(0,"td")(1,"emigrate-sh-html-input",11),t._UZ(2,"p-dropdown",12),t.qZA()()),2&a){const e=t.oxw().$implicit,i=t.oxw();t.xp6(1),t.Q6J("inputFormControl",i.raDetailsListForm.get(e.key)),t.xp6(1),t.Q6J("options",i.raDetailsForm.value.partnerDirectors)("formControl",i.raDetailsListForm.get(e.key))}}function B(a,r){if(1&a&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.YNc(3,O,2,1,"td",6),t.YNc(4,P,3,4,"td",6),t.YNc(5,K,3,2,"td",6),t.YNc(6,G,3,2,"td",6),t.YNc(7,j,3,3,"td",6),t.qZA()),2&a){const e=r.$implicit;t.xp6(2),t.Oqu(e.raDetails),t.xp6(1),t.Q6J("ngIf",2!==e.id&&3!==e.id),t.xp6(1),t.Q6J("ngIf",2===e.id||3===e.id),t.xp6(1),t.Q6J("ngIf",2!==e.id&&3!==e.id&&5!==e.id),t.xp6(1),t.Q6J("ngIf",2===e.id||3===e.id),t.xp6(1),t.Q6J("ngIf",5===e.id)}}let X=(()=>{var a;class r{constructor(){this.selectedItem=new t.vpe}onRowSelect(i){i.data.isDisabled=!1,this.reassignArr.push(i.data),this.selectedItem.emit(this.reassignArr)}onRowUnselect(i){i.data.isDisabled=!0}}return(a=r).\u0275fac=function(i){return new(i||a)},a.\u0275cmp=t.Xpm({type:a,selectors:[["emigrate-confirm-ra-details"]],inputs:{confirmData:"confirmData",raDetailsForm:"raDetailsForm",raDetailsListForm:"raDetailsListForm"},outputs:{selectedItem:"selectedItem"},decls:6,vars:3,consts:[[1,"col-md-12","col-sm-6"],[1,"table-border"],[3,"formGroup"],["dataKey","id",3,"value","selection","selectionChange","onRowSelect","onRowUnselect"],["pTemplate","header"],["pTemplate","body"],[4,"ngIf"],["for","updatedValue",1,"block",3,"inputFormControl"],["type","text","pInputText","",2,"min-width","100%",3,"formControl"],["for","updatedDate",1,"block",3,"inputFormControl"],["appendTo","body","dateFormat","dd/mm/yy",3,"formControl"],["for","dropdownData",1,"block",3,"inputFormControl"],["id","confirmData.id","placeholder","Select an option","EmigrateShDropdown","",3,"options","formControl"]],template:function(i,s){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"form",2)(3,"p-table",3),t.NdJ("selectionChange",function(d){return s.selectedProducts3=d})("onRowSelect",function(d){return s.onRowSelect(d)})("onRowUnselect",function(d){return s.onRowUnselect(d)}),t.YNc(4,H,7,0,"ng-template",4),t.YNc(5,B,8,6,"ng-template",5),t.qZA()()()()),2&i&&(t.xp6(2),t.Q6J("formGroup",s.raDetailsListForm),t.xp6(1),t.Q6J("value",s.confirmData)("selection",s.selectedProducts3))},dependencies:[u.O5,p.KR,p.lC,b.jx,Z.Lt,_.o,x.iA,y.f,o._Y,o.Fj,o.JJ,o.JL,o.oH,o.sg,u.uU]}),r})(),$=(()=>{var a;class r{}return(a=r).\u0275fac=function(i){return new(i||a)},a.\u0275cmp=t.Xpm({type:a,selectors:[["emigrate-ra-details-result"]],inputs:{raId:"raId"},decls:5,vars:1,consts:[[1,"border","p-3"],[2,"color","green"]],template:function(i,s){1&i&&(t.TgZ(0,"div",0)(1,"p",1),t._uU(2,"RC Details have been updated Successfully"),t.qZA(),t.TgZ(3,"p"),t._uU(4),t.qZA()()),2&i&&(t.xp6(4),t.hij("The status of ",s.raId," is Active"))}}),r})();function W(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"div",2)(1,"div",3),t._UZ(2,"emigrate-sh-page-title",4),t.qZA(),t.TgZ(3,"div",5),t._UZ(4,"emigrate-sh-page-instructions",6),t.qZA(),t.TgZ(5,"div",7)(6,"div",8)(7,"div",9),t._UZ(8,"emigrate-sh-page-sub-title",10),t.TgZ(9,"div")(10,"div",5),t._UZ(11,"emigrate-fetch-ra-details",11),t.qZA()()()(),t.TgZ(12,"div",5)(13,"div",12)(14,"div",13)(15,"button",14),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.checkRaId())}),t.qZA()()()()()()}if(2&a){const e=t.oxw();t.xp6(2),t.Q6J("pageTitle",e.pageTitle),t.xp6(2),t.Q6J("instructionsText",e.pageInstructionText)("toolTipText",e.pageInstructionHelpText),t.xp6(4),t.Q6J("pageSubTitle","Fetch RA Details"),t.xp6(3),t.Q6J("fetchRaDetails",e.fetchRaDetailsForm)}}function z(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"div",2)(1,"div",15),t._UZ(2,"emigrate-sh-page-title",4)(3,"emigrate-sh-page-instructions",6),t.qZA(),t.TgZ(4,"div",16),t._UZ(5,"emigrate-sh-page-sub-title",10),t.TgZ(6,"div",8)(7,"div",5),t._UZ(8,"emigrate-fetch-ra-details",11),t.qZA()()(),t.TgZ(9,"div",16),t._UZ(10,"emigrate-sh-page-sub-title",10),t.TgZ(11,"div",8)(12,"div",5),t._UZ(13,"emigrate-ra-details",17),t.qZA()()(),t.TgZ(14,"div",5)(15,"div",12)(16,"div",18)(17,"button",19),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.validateBothFetchRaAndRaDetails(!1))}),t.qZA(),t.TgZ(18,"button",20),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.backsubmitRaid())}),t.qZA()()()()()}if(2&a){const e=t.oxw();t.xp6(2),t.Q6J("pageTitle",e.pageTitle),t.xp6(1),t.Q6J("instructionsText",e.pageInstructionText)("toolTipText",e.pageInstructionHelpText),t.xp6(2),t.Q6J("pageSubTitle","Fetch RA Details"),t.xp6(3),t.Q6J("fetchRaDetails",e.fetchRaDetailsForm),t.xp6(2),t.Q6J("pageSubTitle","RA Details"),t.xp6(3),t.Q6J("raDetailsForm",e.raDetailsForm)}}function tt(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"div",2)(1,"div",5),t._UZ(2,"emigrate-sh-page-title",4)(3,"emigrate-sh-page-instructions",6),t.qZA(),t.TgZ(4,"div",16),t._UZ(5,"emigrate-sh-page-sub-title",10),t.TgZ(6,"div",8)(7,"div",5)(8,"emigrate-update-ra-details-list",21),t.NdJ("selectedItem",function(s){t.CHM(e);const l=t.oxw();return t.KtG(l.selectedItem(s))}),t.qZA()()()(),t.TgZ(9,"div",5)(10,"div",12)(11,"div",18)(12,"button",22),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.checkUpdatedDetails())}),t.qZA(),t.TgZ(13,"button",23),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.validateFetchRaDetails())}),t.qZA()()()()()}if(2&a){const e=t.oxw();t.xp6(2),t.Q6J("pageTitle",e.pageTitle),t.xp6(1),t.Q6J("instructionsText",e.pageInstructionText)("toolTipText",e.pageInstructionHelpText),t.xp6(2),t.Q6J("pageSubTitle","Update RC Details"),t.xp6(3),t.Q6J("raDetailsForm",e.raDetailsForm)("raDetailsListForm",e.raDetailsListForm),t.xp6(4),t.Q6J("disabled",0===e.itemArray.length)}}function et(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"div",2)(1,"div",15),t._UZ(2,"emigrate-sh-page-title",4)(3,"emigrate-sh-page-instructions",6),t.qZA(),t.TgZ(4,"div",16),t._UZ(5,"emigrate-sh-page-sub-title",10),t.TgZ(6,"div",8)(7,"div",24)(8,"emigrate-confirm-ra-details",25),t.NdJ("selectedItem",function(s){t.CHM(e);const l=t.oxw();return t.KtG(l.selectedItem(s))}),t.qZA()()()(),t.TgZ(9,"div",5)(10,"div",12)(11,"div",18)(12,"button",26),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.updateRCDetails())}),t.qZA(),t.TgZ(13,"button",27),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.validateBothFetchRaAndRaDetails(!0))}),t.qZA()()()()()}if(2&a){const e=t.oxw();t.xp6(2),t.Q6J("pageTitle",e.pageTitle),t.xp6(1),t.Q6J("instructionsText",e.pageInstructionText)("toolTipText",e.pageInstructionHelpText),t.xp6(2),t.Q6J("pageSubTitle","Confirm RA Details"),t.xp6(3),t.Q6J("confirmData",e.itemArray)("raDetailsForm",e.raDetailsForm)("raDetailsListForm",e.raDetailsListForm)}}function it(a,r){if(1&a&&(t.TgZ(0,"div",2)(1,"div",3),t._UZ(2,"emigrate-sh-page-title",4),t.qZA(),t.TgZ(3,"div",16),t._UZ(4,"emigrate-sh-page-sub-title",10),t.TgZ(5,"div",8)(6,"div",24),t._UZ(7,"emigrate-ra-details-result",28),t.qZA()()()()),2&a){const e=t.oxw();t.xp6(2),t.Q6J("pageTitle",e.pageTitle),t.xp6(2),t.Q6J("pageSubTitle","Success"),t.xp6(3),t.Q6J("raId",e.tempRadetails.praRaId)}}const at=[{path:"",pathMatch:"full",component:(()=>{var a;class r extends p.H6{constructor(i,s,l,d,v){super(i),this.helperService=s,this.updateRcDetailService=l,this.uiService=d,this.datePipe=v,this.pageTitle="Update RC Details",this.pageInstructionText=c.Xef.PAGE_INSTRUCTION_TEXT,this.pageInstructionHelpText=c.Xef.PAGE_INSTRUCTION_HELP_TEXT,this.fetchRaDetails=!0,this.bothFetchRaAndRaDetails=!1,this.updateRcDetails=!1,this.confirmRaDetails=!1,this.successInfo=!1,this.itemArray=[]}selectedItem(i){this.itemArray=i}ngOnInit(){this.uiService.initPageSetup([],""),this.fetchRaDetailsForm=this.helperService.createFetchRaDetails(),this.raDetailsForm=this.helperService.createRaDetails(this.tempRadetails),this.raDetailsListForm=this.helperService.createRaDetailsList(),this.fetchRaDetailsForm.setValidators(o.kI.required)}validateFetchRaDetails(){this.fetchRaDetailsForm.get("raId").disable(),this.fetchRaDetails=!1,this.bothFetchRaAndRaDetails=!0,this.updateRcDetails=!1,this.confirmRaDetails=!1,this.successInfo=!1}backsubmitRaid(){this.fetchRaDetailsForm=this.helperService.createFetchRaDetails(),this.fetchRaDetails=!0,this.bothFetchRaAndRaDetails=!1,this.updateRcDetails=!1,this.confirmRaDetails=!1,this.successInfo=!1}validateBothFetchRaAndRaDetails(i){i&&this.raDetailsListForm.disable(),this.fetchRaDetails=!1,this.bothFetchRaAndRaDetails=!1,this.updateRcDetails=!0,this.confirmRaDetails=!1,this.successInfo=!1}validateUpdateRcDetails(){this.fetchRaDetails=!1,this.bothFetchRaAndRaDetails=!1,this.updateRcDetails=!1,this.confirmRaDetails=!0,this.successInfo=!1}validateConfirmRaDetails(){this.fetchRaDetails=!1,this.bothFetchRaAndRaDetails=!1,this.updateRcDetails=!1,this.confirmRaDetails=!1,this.successInfo=!0}get raId(){return this.fetchRaDetailsForm.get("raId").value}get expiryDate(){return this.raDetailsListForm.get("praRcExpDate")}get expiryDateCond(){return this.raDetailsListForm.get("praRcExpDateCond")}checkRaId(){this.fetchRaDetailsForm.valid?(this.uiService.showSpinner(),this.updateRcDetailService.getRaId(this.raId).subscribe(i=>{this.tempRadetails=i,this.raDetailsForm.setValue(i),this.uiService.hideSpinner(),this.validateFetchRaDetails(),c.Xef.SUCCESS&&this.showSuccessToast(c.rmt.DEFAULT_DATA_FETCHED_SUCCESS)},i=>{this.uiService.hideSpinner(),this.showErrorToast(c.rmt.DEFAULT_RA_ID)})):this.fetchRaDetailsForm.invalid&&this.showErrorToast(c.rmt.DEFAULT_RA_ID)}checkUpdatedDetails(){this.validateEmail(),this.validatePhoneNumber(),setTimeout(()=>{if(!this.isExist&&!this.isMobileExist){let i=!1;const s=this.itemArray.map(l=>l.id);this.itemArray.find(l=>{l.updatedValue=this.raDetailsListForm.get(l.key).value,null!==l.updatedValue&&""!==l.updatedValue&&(i=!0)}),this.raDetailsListForm.valid?i?s.includes(2)&&s.includes(3)?this.showErrorToast("You can only select one date either the expiry date or expiry date conditional"):this.validateUpdateRcDetails():i||this.showErrorToast("Please select any one or all of the above fields and update the fields "):this.raDetailsListForm.invalid&&this.showErrorToast("Please fill the proper valid fields")}},1e3)}updateRCDetails(){let i=!1;this.itemArray.find(s=>{""!==this.raDetailsListForm.get(s.key).value&&(i=!0)}),this.validateEmail(),this.validatePhoneNumber(),setTimeout(()=>{!this.isExist&&!this.isMobileExist&&(this.raDetailsListForm.valid?i?(this.itemArray.map(s=>{const l=Object.keys(this.tempRadetails)[s.id];this.tempRadetails[l]=this.raDetailsListForm.get(s.key).value}),this.tempRadetails&&(this.uiService.showSpinner(),this.tempRadetails.praRcExpDate=this.datePipe.transform(this.tempRadetails.praRcExpDate,"yyyy-MM-dd"),this.tempRadetails.praRcExpDateCond=this.datePipe.transform(this.tempRadetails.praRcExpDateCond,"yyyy-MM-dd"),this.updateRcDetailService.updateRcDetails(this.tempRadetails).subscribe(s=>{s&&(this.uiService.hideSpinner(),this.validateConfirmRaDetails(),c.Xef.SUCCESS&&this.showSuccessToast("successfully updated"))},s=>{this.uiService.hideSpinner(),this.showErrorToast(s?.error?.error?.errorMessage)}))):i||this.showErrorToast("Please select any one or all of the above fields and update the fields "):this.raDetailsListForm.invalid&&this.showErrorToast("Please fill the proper valid fields"))},1e3)}validateEmail(){const i=this.raDetailsListForm.controls.padEmail.value;""!=i&&null!=i&&(this.uiService.showSpinner(),this.updateRcDetailService.validateEmail(i).subscribe({next:s=>{"failed"===s.status.toLowerCase()?(this.showErrorToast(s.message,"Rc Update"),this.uiService.hideSpinner(),this.isExist=!0):(this.uiService.hideSpinner(),this.isExist=!1)},error:s=>{},complete:()=>{}}))}validatePhoneNumber(){const i=this.raDetailsListForm.controls.padMobileNum.value;10===String(i).length&&(this.uiService.showSpinner(),this.updateRcDetailService.validatePhoneNumber(i).subscribe({next:s=>{"failed"===s.status.toLowerCase()?(this.showErrorToast(s.message,"Rc Update"),this.isMobileExist=!0,this.uiService.hideSpinner()):(this.uiService.hideSpinner(),this.isMobileExist=!1)},error:s=>{},complete:()=>{}}))}}return(a=r).\u0275fac=function(i){return new(i||a)(t.Y36(b.ez),t.Y36(F),t.Y36(h),t.Y36(A.n),t.Y36(u.uU))},a.\u0275cmp=t.Xpm({type:a,selectors:[["emigrate-update-rc-details"]],features:[t.qOj],decls:11,vars:5,consts:[[1,"middle_section"],["class","container",4,"ngIf"],[1,"container"],[1,"row","header-background","mb-3"],[3,"pageTitle"],[1,"row"],[3,"instructionsText","toolTipText"],[1,"content"],[1,"form"],[1,"table-border","p-0"],[3,"pageSubTitle"],[3,"fetchRaDetails"],[1,"col-12"],[1,"buttons"],["pButton","","type","submit","label","Submit",1,"btn-format","btn-blue",3,"click"],[1,"row","header-background"],[1,"content","border","my-3"],[3,"raDetailsForm"],[1,"buttons","mt-3"],["pButton","","type","submit","label","CONFIRM DETAILS",1,"mr-3","btn-format","btn-blue",3,"click"],["pButton","","type","submit","label","BACK",1,"btn-format","btn-blue",3,"click"],[3,"raDetailsForm","raDetailsListForm","selectedItem"],["pButton","","type","submit","label","PROCEED",1,"btn-format","btn-blue","mr-3",3,"disabled","click"],["pButton","","type","button","label","Back",1,"btn-format","btn-blue",3,"click"],[1,"row","p-3"],[3,"confirmData","raDetailsForm","raDetailsListForm","selectedItem"],["pButton","","type","submit","label","UPDATE DETAILS",1,"mr-3","btn-format","btn-blue",3,"click"],["pButton","","type","button","label","CANCEL",1,"btn-format","btn-blue",3,"click"],[3,"raId"]],template:function(i,s){1&i&&(t.TgZ(0,"div",0),t._UZ(1,"p-toast"),t.TgZ(2,"form"),t.YNc(3,W,16,5,"div",1),t.qZA(),t.TgZ(4,"form"),t.YNc(5,z,19,7,"div",1),t.qZA(),t.TgZ(6,"form"),t.YNc(7,tt,14,7,"div",1),t.qZA(),t.TgZ(8,"form"),t.YNc(9,et,14,7,"div",1),t.qZA(),t.YNc(10,it,8,3,"div",1),t.qZA()),2&i&&(t.xp6(3),t.Q6J("ngIf",s.fetchRaDetails),t.xp6(2),t.Q6J("ngIf",s.bothFetchRaAndRaDetails),t.xp6(2),t.Q6J("ngIf",s.updateRcDetails),t.xp6(2),t.Q6J("ngIf",s.confirmRaDetails),t.xp6(1),t.Q6J("ngIf",s.successInfo))},dependencies:[u.O5,p.TM,p.jZ,p.dB,S.Hq,w.FN,o._Y,o.JL,o.F,J,L,Y,X,$]}),r})()}];let st=(()=>{var a;class r{}return(a=r).\u0275fac=function(i){return new(i||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[C.Bz.forChild(at),C.Bz]}),r})(),rt=(()=>{var a;class r{}return(a=r).\u0275fac=function(i){return new(i||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[u.ez,st,p.uR,U.g,o.UX,o.u5,I.d]}),r})()}}]);