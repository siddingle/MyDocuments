"use strict";(self.webpackChunke_migrate=self.webpackChunke_migrate||[]).push([[4925],{4925:(U,d,s)=>{s.r(d),s.d(d,{ReferralWagesModule:()=>D});var g=s(6895),p=s(3599),f=s(2976),h=s(1080);class v{deserialize(i){return Object.assign(this,i),this}}var e=s(1571),n=s(4006),l=s(1358);let b=(()=>{var o;class i{constructor(r){this.fb=r}maintainingMinimumReferralWages(r){return this.fb.group({country:this.fb.control({value:null,disabled:r},n.kI.required),jobRole:this.fb.control("",n.kI.required),currency:this.fb.control(""),existingMrw:this.fb.control(""),existingAllowance:this.fb.control(""),revisedMrw:this.fb.control(null,n.kI.compose([n.kI.required,l.YO.numericValidator()])),revisedAllowance:this.fb.control(null,n.kI.compose([n.kI.required,l.YO.numericValidator()])),effectiveDate:this.fb.control("",n.kI.required)})}wagesApiPayload(r){const a=r.getRawValue();return(new v).deserialize({minWage:a.revisedMrw,minAllowance:a.revisedAllowance,effectiveDate:a.effectiveDate})}maintainupdateProfile(r){return this.fb.group({oldPassword:this.fb.control({value:null,disabled:r},n.kI.required),changePassword:this.fb.control({value:null,disabled:r},n.kI.compose([n.kI.required,l.YO.passwordValidator("retypeNewPassword",!0)])),retypeNewPassword:this.fb.control({value:null,disabled:r},n.kI.compose([n.kI.required,l.YO.passwordValidator("changePassword")])),securityInformation:this.fb.control({value:null,disabled:r},n.kI.required),currentSecurityInformation:this.fb.control({value:null,disabled:r},n.kI.required),currentSecurityAnswer:this.fb.control({value:null,disabled:r},n.kI.required),otp:this.fb.control({value:null,disabled:r},n.kI.required),newPassword:this.fb.control({value:null,disabled:r},n.kI.compose([n.kI.required,l.YO.passwordValidator("retypeNewPassword1",!0)])),retypeNewPassword1:this.fb.control({value:null,disabled:r},n.kI.compose([n.kI.required,l.YO.passwordValidator("newPassword")]))})}}return(o=i).\u0275fac=function(r){return new(r||o)(e.LFG(n.qu))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),i})();var W=s(1754),x=s(5128),w=s(805),C=s(5717),y=s(5593),F=s(2210),I=s(1740),R=s(2453),T=s(8645);function G(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",2)(1,"div",3)(2,"div",4),e._UZ(3,"emigrate-sh-page-instructions",5),e.qZA(),e._UZ(4,"emigrate-sh-page-sub-title",6),e.TgZ(5,"div",7)(6,"div",4)(7,"form",8)(8,"div",4)(9,"div",9)(10,"div",10)(11,"emigrate-sh-html-input",11),e._UZ(12,"p-dropdown",12),e.qZA()()(),e.TgZ(13,"div",9)(14,"div",10)(15,"emigrate-sh-html-input",13),e._UZ(16,"p-dropdown",12),e.qZA()()(),e.TgZ(17,"div",9)(18,"div",10)(19,"emigrate-sh-html-input",14),e._UZ(20,"input",15),e.qZA()()(),e.TgZ(21,"div",9)(22,"div",10)(23,"emigrate-sh-html-input",16),e._UZ(24,"input",17),e.qZA()()(),e.TgZ(25,"div",9)(26,"div",10)(27,"emigrate-sh-html-input",18),e._UZ(28,"input",19),e.qZA()()(),e.TgZ(29,"div",9)(30,"div",10)(31,"emigrate-sh-html-input",20),e._UZ(32,"input",21),e.qZA()()(),e.TgZ(33,"div",9)(34,"div",10)(35,"emigrate-sh-html-input",22),e._UZ(36,"input",23),e.qZA()()(),e.TgZ(37,"div",9)(38,"div",10)(39,"emigrate-sh-html-input",24),e._UZ(40,"p-calendar",25),e.qZA()()()()(),e.TgZ(41,"div",26)(42,"button",27),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.clear())}),e._uU(43,"Clear"),e.qZA(),e.TgZ(44,"button",28),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.backToHome())}),e._uU(45,"Cancel"),e.qZA(),e.TgZ(46,"button",29),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.submit())}),e._uU(47,"Submit"),e.qZA()()()()()()}if(2&o){const t=e.oxw();e.xp6(3),e.Q6J("instructionsText",t.pageInstructionText),e.xp6(1),e.Q6J("pageSubTitle","Maintain Referral Wages"),e.xp6(3),e.Q6J("formGroup",t.referralWagesFormGroup),e.xp6(4),e.Q6J("inputFormControl",t.referralWagesFormGroup.controls.country),e.xp6(1),e.Q6J("formControl",t.referralWagesFormGroup.controls.country)("options",t.country),e.xp6(3),e.Q6J("inputFormControl",t.referralWagesFormGroup.controls.jobRole),e.xp6(1),e.Q6J("formControl",t.referralWagesFormGroup.controls.jobRole)("options",t.jobRole),e.xp6(3),e.Q6J("inputFormControl",t.referralWagesFormGroup.controls.currency),e.xp6(1),e.Q6J("formControl",t.referralWagesFormGroup.controls.currency),e.xp6(3),e.Q6J("inputFormControl",t.referralWagesFormGroup.controls.existingMrw),e.xp6(1),e.Q6J("formControl",t.referralWagesFormGroup.controls.existingMrw),e.xp6(3),e.Q6J("inputFormControl",t.referralWagesFormGroup.controls.existingAllowance),e.xp6(1),e.Q6J("formControl",t.referralWagesFormGroup.controls.existingAllowance),e.xp6(3),e.Q6J("inputFormControl",t.referralWagesFormGroup.controls.revisedMrw),e.xp6(1),e.Q6J("formControl",t.referralWagesFormGroup.controls.revisedMrw),e.xp6(3),e.Q6J("inputFormControl",t.referralWagesFormGroup.controls.revisedAllowance),e.xp6(1),e.Q6J("formControl",t.referralWagesFormGroup.controls.revisedAllowance),e.xp6(3),e.Q6J("inputFormControl",t.referralWagesFormGroup.controls.effectiveDate),e.xp6(1),e.Q6J("formControl",t.referralWagesFormGroup.controls.effectiveDate)("minDate",t.minDate)("maxDate",t.maxDate)}}function A(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",30),e._UZ(1,"emigrate-arn-status",31),e.TgZ(2,"div",32)(3,"button",33),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.redirectToHome())}),e.qZA()()()}if(2&o){const t=e.oxw();e.xp6(1),e.Q6J("message",t.wagesStatus)("subTitle","Note")("isFromTrackApp",!0)}}let Z=(()=>{var o;class i{constructor(r,a,c,u,m,Q){this.formHelper=r,this.routerQuery=a,this.router=c,this.formhelperService=u,this._referralWagesService=m,this.messageService=Q,this.country=[],this.jobRole=[],this.pageInstructionText=f.Xef.PAGE_INSTRUCTION_TEXT,this.minimumWages=!0}ngOnInit(){this.referralWagesFormGroup=this.formHelper.maintainingMinimumReferralWages(!1),this.minDate=new Date,this.minDate.setDate(this.minDate.getDate()+1),this.officeData=this.routerQuery.getData(),this.country=this.officeData[0][h.NCw.COUNTRY],this.jobRole=this.officeData[0][h.NCw.JOB_ROLE],this.onCountryChange(),this.onRoleChange()}onCountryChange(){this.referralWagesFormGroup.controls.country.valueChanges.subscribe(r=>{this._referralWagesService.getCurrencies(r).subscribe(a=>{const c=this.referralWagesFormGroup.controls.currency;c.setValue(a.data.shortName),c.disable()})})}onRoleChange(){this.referralWagesFormGroup.controls.jobRole.valueChanges.subscribe(r=>{this._referralWagesService.getExistingWages(this.referralWagesFormGroup.controls.country.value,r).subscribe(u=>{const m=u.data[0];this.referralWagesFormGroup.controls.existingMrw.setValue(m.minWage),this.referralWagesFormGroup.controls.existingAllowance.setValue(m.minAllowance),this.referralWagesFormGroup.controls.existingMrw.disable(),this.referralWagesFormGroup.controls.existingAllowance.disable()})})}backToHome(){this.router.navigateByUrl("/admin/dashboard")}submit(){if(this.referralWagesFormGroup.markAllAsTouched(),this.referralWagesFormGroup.valid){const r=Object.assign(new v,this.formhelperService.wagesApiPayload(this.referralWagesFormGroup));this._referralWagesService.updateRevisedWages(this.referralWagesFormGroup.controls.country.value,this.referralWagesFormGroup.controls.jobRole.value,r).subscribe(u=>{"200"!==u.statusCode?this.showErrorToast(u.message):(this.showSuccessToast(u.message),this.minimumWages=!1,this.wagesStatus=u.status)},u=>{this.showErrorToast(u.error.error.errorMessage)})}}clear(){this.referralWagesFormGroup.reset()}redirectToHome(){this.router.navigateByUrl("/admin/dashboard")}showErrorToast(r){this.messageService.add({severity:"error",summary:"ReferralWages-status",detail:r})}showSuccessToast(r){this.messageService.add({severity:"success",summary:"ReferralWages-status",detail:r})}}return(o=i).\u0275fac=function(r){return new(r||o)(e.Y36(b),e.Y36(W.dt),e.Y36(p.F0),e.Y36(b),e.Y36(x.O),e.Y36(w.ez))},o.\u0275cmp=e.Xpm({type:o,selectors:[["emigrate-referral-wages"]],decls:3,vars:2,consts:[["class","container content p-3 border mt-2 mb-4",4,"ngIf"],["style","margin-bottom: 10px",4,"ngIf"],[1,"container","content","p-3","border","mt-2","mb-4"],[1,"row_box"],[1,"row"],[3,"instructionsText"],[3,"pageSubTitle"],[1,"form"],[3,"formGroup"],[1,"col-md-6","col-sm-6"],[1,"field"],["for","1","inputLabel","Country","inputId","country",1,"block",3,"inputFormControl"],["id","typeOfEventuality","placeholder","Select an option","EmigrateShDropdown","",3,"formControl","options"],["for","2","inputLabel","Job Role","inputId","jobRole",1,"block",3,"inputFormControl"],["for","2","inputLabel","Currency","inputId","currency",1,"block",3,"inputFormControl"],["id","currency","type","text","pInputText","","placeholder","Currency",3,"formControl"],["for","2","inputLabel","Existing MRW","inputId","mrw",1,"block",3,"inputFormControl"],["id","mrw","type","text","pInputText","","placeholder","Existing MRW",3,"formControl"],["for","2","inputLabel","Existing Allowance","inputId","allowance",1,"block",3,"inputFormControl"],["id","allowance","type","text","pInputText","","placeholder","Existing Allowance",3,"formControl"],["for","2","inputLabel","Revised MRW","inputId","revisedMrw",1,"block",3,"inputFormControl"],["id","revisedMrw","type","text","pInputText","","placeholder","Revised MRW","maxlength","6",3,"formControl"],["for","2","inputLabel","Revised Allowance","inputId","revisedAllowance",1,"block",3,"inputFormControl"],["id","revisedAllowance","type","text","pInputText","","placeholder","Revised Allowance","maxlength","6",3,"formControl"],["for","2","inputLabel","Effective Date","inputId","date",1,"block",3,"inputFormControl"],["appendTo","body","inputId","InsurancePolicyIssuedon",3,"formControl","minDate","maxDate"],[1,"buttons","mt-3"],["pButton","","type","button",1,"p-button-secondary","mr-2","btn-format",3,"click"],["pButton","","type","button",1,"btn-format","btn-blue","mr-2",3,"click"],["pButton","","type","button",1,"btn-format","btn-blue",3,"click"],[2,"margin-bottom","10px"],[3,"message","subTitle","isFromTrackApp"],[1,"buttons","mb-3","mt-3"],["pButton","","type","button","label","Close",1,"btn-format","mr-2","btn-blue",3,"click"]],template:function(r,a){1&r&&(e._UZ(0,"p-toast"),e.YNc(1,G,48,23,"div",0),e.YNc(2,A,4,3,"div",1)),2&r&&(e.xp6(1),e.Q6J("ngIf",a.minimumWages),e.xp6(1),e.Q6J("ngIf",!a.minimumWages))},dependencies:[g.O5,C.b,l.KR,l.jZ,l.dB,l.lC,y.Hq,F.Lt,I.o,R.FN,T.f,n._Y,n.Fj,n.JJ,n.JL,n.nD,n.oH,n.sg]}),i})();var J=s(2768);const k=[{path:"referral-wages-minimum",pathMatch:"full",component:Z,resolve:[f.OTs]}];let M=(()=>{var o;class i{}return(o=i).\u0275fac=function(r){return new(r||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[p.Bz.forChild(k),p.Bz,J.UpdateGrievanceModule]}),i})();var S=s(6270);let D=(()=>{var o;class i{}return(o=i).\u0275fac=function(r){return new(r||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[g.ez,M,l.uR,S.g,n.UX,n.u5]}),i})()}}]);