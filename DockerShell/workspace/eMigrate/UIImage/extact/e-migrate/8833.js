"use strict";(self.webpackChunke_migrate=self.webpackChunke_migrate||[]).push([[8833],{8833:(H,y,s)=>{s.r(y),s.d(y,{JobModule:()=>q});var Z=s(6895),J=s(6270),c=s(1358),i=s(4006),h=s(3599),l=s(2976),e=s(1571),C=s(805),T=s(6945);let F=(()=>{var r;class a{constructor(t){this.fb=t}createSearchForm(t){return this.fb.group({jobId:this.fb.control({value:null,disabled:t}),demandId:this.fb.control({value:null,disabled:t}),countryId:this.fb.control({value:null,disabled:t}),employerId:this.fb.control({value:null,disabled:t})})}searchFormToEmigrateSearchJob(t){const o=t.getRawValue();return(new l.lMm).deserialize({jobId:o.jobId,demandId:o.demandId,countryId:o.countryId,employerId:o.employerId})}createJobStatusForm(t){return this.fb.group({reason:this.fb.control({value:null,disabled:t},i.kI.required)})}}return(r=a).\u0275fac=function(t){return new(t||r)(e.LFG(i.qu))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),a})();var p,b=s(655),g=s(4004),S=s(262),v=s(8513);class m{constructor(a){this.searchservice=a}getUserByRole(a,n){return this.searchservice.getUser(a,n).pipe((0,g.U)(t=>t),(0,S.K)(t=>{throw t}))}getJobs(a,n){return this.searchservice.getJobs(a,n).pipe((0,g.U)(t=>t),(0,S.K)(t=>{throw t}))}saveJobStatus(a,n){return this.searchservice.saveJobStatus(a,n).pipe((0,g.U)(t=>t),(0,S.K)(t=>{throw t}))}}(p=m).\u0275fac=function(a){return new(a||p)(e.LFG(l.oDG))},p.\u0275prov=e.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),(0,b.gn)([(0,v.PS)()],m.prototype,"getUserByRole",null),(0,b.gn)([(0,v.PS)()],m.prototype,"getJobs",null),(0,b.gn)([(0,v.PS)()],m.prototype,"saveJobStatus",null);var j=s(1754),U=s(5593),A=s(2210),D=s(1740),w=s(2453),u=s(4826),x=s(3054);function G(r,a){1&r&&(e.TgZ(0,"tr")(1,"th",30)(2,"p-tableHeaderCheckbox"),e._uU(3,"Select"),e.qZA()(),e.TgZ(4,"th",31)(5,"div",32),e._uU(6," Demand ID "),e._UZ(7,"p-sortIcon",33)(8,"p-columnFilter",34),e.qZA()(),e.TgZ(9,"th",35)(10,"div",32),e._uU(11," Job ID "),e._UZ(12,"p-sortIcon",36)(13,"p-columnFilter",37),e.qZA()(),e.TgZ(14,"th",38)(15,"div",32),e._uU(16," Job Status "),e._UZ(17,"p-sortIcon",39)(18,"p-columnFilter",40),e.qZA()(),e.TgZ(19,"th",41)(20,"div",32),e._uU(21," Employer Name "),e._UZ(22,"p-sortIcon",42)(23,"p-columnFilter",43),e.qZA()(),e.TgZ(24,"th",44)(25,"div",32),e._uU(26," Country "),e._UZ(27,"p-sortIcon",45)(28,"p-columnFilter",46),e.qZA()(),e.TgZ(29,"th",47)(30,"div",32),e._uU(31," Employer ID "),e._UZ(32,"p-sortIcon",48)(33,"p-columnFilter",49),e.qZA()()())}function E(r,a){if(1&r&&(e.TgZ(0,"tr",50)(1,"td"),e._UZ(2,"p-tableCheckbox",51),e.qZA(),e.TgZ(3,"td")(4,"span",52),e._uU(5,"Demand ID"),e.qZA(),e._uU(6),e.qZA(),e.TgZ(7,"td")(8,"span",52),e._uU(9,"Job ID"),e.qZA(),e._uU(10),e.qZA(),e.TgZ(11,"td")(12,"span",52),e._uU(13,"Job Status"),e.qZA(),e._uU(14),e.qZA(),e.TgZ(15,"td")(16,"span",52),e._uU(17,"Employer Name"),e.qZA(),e._uU(18),e.qZA(),e.TgZ(19,"td")(20,"span",52),e._uU(21,"Country"),e.qZA(),e._uU(22),e.qZA(),e.TgZ(23,"td")(24,"span",52),e._uU(25,"Employer ID"),e.qZA(),e._uU(26),e.qZA()()),2&r){const n=a.$implicit;e.Q6J("pSelectableRow",n),e.xp6(2),e.Q6J("value",n),e.xp6(4),e.hij(" ",n.demandId," "),e.xp6(4),e.hij(" ",n.jobId," "),e.xp6(4),e.hij(" ",n.jobStatus," "),e.xp6(4),e.hij(" ",n.employerName," "),e.xp6(4),e.hij(" ",n.country," "),e.xp6(4),e.hij(" ",n.employerId," ")}}function R(r,a){1&r&&(e.TgZ(0,"tr")(1,"td",53),e._uU(2,"No Job found."),e.qZA()())}const N=function(){return[10,25,50]},P=function(){return["demandId","jobId","jobStatus","employerName","country","employerId"]};let I=(()=>{var r;class a extends c.H6{constructor(t,o,d,f,L,Y){super(t),this.uiService=o,this.formHelper=d,this.jobService=f,this.router=L,this.routerQuery=Y,this.RecordClick=new e.vpe,this.breadcrumb=[],this.pageTitle="Search Criteria",this.countries=[],this.jobDataArr=[],this.selectedJobs=[],this.uiService.initPageSetup(this.breadcrumb,"Search Job")}ngOnInit(){this.jobStatus=this.routerQuery.getData().status,this.jobDataArr=[],this.countries=this.routerQuery.getData()[0][l.P$6.COUNTRY],this.searchFormGroup=this.formHelper.createSearchForm(!1),this.saveJobStatusFormGroup=this.formHelper.createJobStatusForm(!1)}clearData(){this.searchFormGroup.reset()}getJobs(){this.jobDataArr=[],this.uiService.showSpinner();let t=Object.assign(new l.lMm,this.formHelper.searchFormToEmigrateSearchJob(this.searchFormGroup));this.jobService.getJobs(this.jobStatus,t).subscribe({next:o=>{o.status.toLowerCase()===l.Xef.SUCCESS?(this.showSuccessToast(o.message,"Search"),this.jobDataArr=JSON.parse(JSON.stringify(o.data)),this.uiService.hideSpinner()):(this.uiService.hideSpinner(),this.showErrorToast(o?.message,"Search"))},error:o=>{this.showErrorToast(o?.error?.errorMessage,"Search"),this.uiService.hideSpinner()}})}onRowClick(t){this.selectedJobs=t}sendData(){let t;this.saveJobStatusFormGroup.valid&&this.selectedJobs.length>0?(t=this.selectedJobs.map(o=>({jobId:o.jobId,jobStatus:o.jobStatus,reason:this.reasonData})),this.jobService.saveJobStatus(this.jobStatus,t).subscribe({next:o=>{o.status.toLowerCase()===l.Xef.SUCCESS?(this.showSuccessToast(o.message,""),this.uiService.hideSpinner()):(this.uiService.hideSpinner(),this.showErrorToast(o?.message,""))},error:o=>{this.showErrorToast(o?.error?.errorMessage,""),this.uiService.hideSpinner()}})):this.saveJobStatusFormGroup.valid&&this.selectedJobs.length<=0?(this.showErrorToast("Please select at least one job to proceed",""),this.uiService.hideSpinner()):!this.saveJobStatusFormGroup.valid&&this.selectedJobs.length>0?(this.showErrorToast("Please enter reason for changing status",""),this.uiService.hideSpinner()):this.showErrorToast("Please select at least one job and enter the remark to proceed")}clearTable(t){t.clear()}get reasonData(){return this.saveJobStatusFormGroup.controls.reason.value}}return(r=a).\u0275fac=function(t){return new(t||r)(e.Y36(C.ez),e.Y36(T.n),e.Y36(F),e.Y36(m),e.Y36(h.F0),e.Y36(j.dt))},r.\u0275cmp=e.Xpm({type:r,selectors:[["emigrate-search-criteria"]],outputs:{RecordClick:"RecordClick"},features:[e.qOj],decls:43,vars:23,consts:[[1,"container"],[1,"content"],[3,"pageSubTitle"],[1,"form","p-2"],[3,"formGroup"],[1,"row"],[1,"col-md-4","col-sm-6"],[1,"field"],["inputLabel","Job ID","inputId","jobId",1,"block",3,"inputFormControl"],["id","jobId","type","text","pInputText","","placeholder","",3,"formControl"],["inputLabel","Demand/Permit ID","inputId","demandId",1,"block",3,"inputFormControl"],["id","demandId","type","text","pInputText","","placeholder","",3,"formControl"],["inputLabel","Country","inputId","countryId",1,"block",3,"inputFormControl"],["EmigrateShDropdown","","id","countryId","placeholder","Select",3,"formControl","options"],["inputLabel","Employer/Project Exporter ID","inputId","employerId",1,"block",3,"inputFormControl"],["id","employerId","type","text","pInputText","","placeholder","",3,"formControl"],[1,"buttons","mt-3"],["pButton","","type","button",1,"btn-blue","mr-2","btn-format",3,"click"],["pButton","","type","button",1,"btn-format","btn-blue",3,"click"],[1,"search-result"],["pageSubTitle","Search Result"],[1,"card"],["dataKey","demandId","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","rows","showCurrentPageReport","rowsPerPageOptions","paginator","filterDelay","globalFilterFields","selection","selectionChange"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"mt-2","mb-2"],["for","remark","inputLabel","Reason for Changing Status",3,"inputFormControl"],["rows","5","cols","30","pInputTextarea","","placeholder","","formControlName","reason"],[2,"width","4rem"],["pSortableColumn","demandId",2,"min-width","10rem"],[1,"flex","justify-content-between","align-items-center"],["field","demandId"],["type","text","field","demandId","display","menu",1,"ml-auto"],["pSortableColumn","jobId",2,"min-width","12rem"],["field","jobId"],["type","text","field","jobId","display","menu",1,"ml-auto"],["pSortableColumn","jobStatus",2,"min-width","12rem"],["field","jobStatus"],["type","jobStatus","field","jobStatus","display","menu",1,"ml-auto"],["pSortableColumn","employerName",2,"min-width","16rem"],["field","employerName"],["type","text","field","employerName","display","menu",1,"ml-auto"],["pSortableColumn","country",2,"min-width","14rem"],["field","country"],["type","text","field","country","display","menu",1,"ml-auto"],["pSortableColumn","employerId",2,"min-width","10rem"],["field","employerId"],["type","text","field","employerId","display","menu",1,"ml-auto"],[3,"pSelectableRow"],[3,"value"],[1,"p-column-title"],["colspan","7"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"p-toast"),e.TgZ(2,"div",1),e._UZ(3,"emigrate-sh-page-sub-title",2),e.TgZ(4,"div",3)(5,"form",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"emigrate-sh-html-input",8),e._UZ(10,"input",9),e.qZA()()(),e.TgZ(11,"div",6)(12,"div",7)(13,"emigrate-sh-html-input",10),e._UZ(14,"input",11),e.qZA()()(),e.TgZ(15,"div",6)(16,"div",7)(17,"emigrate-sh-html-input",12),e._UZ(18,"p-dropdown",13),e.qZA()()(),e.TgZ(19,"div",6)(20,"div",7)(21,"emigrate-sh-html-input",14),e._UZ(22,"input",15),e.qZA()()()(),e.TgZ(23,"div",16)(24,"button",17),e.NdJ("click",function(){return o.getJobs()}),e._uU(25,"Search"),e.qZA(),e.TgZ(26,"button",18),e.NdJ("click",function(){return o.clearData()}),e._uU(27,"Clear"),e.qZA()()()(),e.TgZ(28,"div",19),e._UZ(29,"emigrate-sh-page-sub-title",20),e.TgZ(30,"div",21)(31,"p-table",22,23),e.NdJ("selectionChange",function(f){return o.selectedJobs=f}),e.YNc(33,G,34,0,"ng-template",24),e.YNc(34,E,27,8,"ng-template",25),e.YNc(35,R,3,0,"ng-template",26),e.qZA()(),e.TgZ(36,"div",27)(37,"form",4)(38,"emigrate-sh-html-input",28),e._UZ(39,"textarea",29),e.qZA()()(),e.TgZ(40,"div",16)(41,"button",17),e.NdJ("click",function(){return o.sendData()}),e._uU(42,"Proceed"),e.qZA()()()()()),2&t&&(e.xp6(3),e.Q6J("pageSubTitle",o.pageTitle),e.xp6(2),e.Q6J("formGroup",o.searchFormGroup),e.xp6(4),e.Q6J("inputFormControl",o.searchFormGroup.controls.jobId),e.xp6(1),e.Q6J("formControl",o.searchFormGroup.controls.jobId),e.xp6(3),e.Q6J("inputFormControl",o.searchFormGroup.controls.demandId),e.xp6(1),e.Q6J("formControl",o.searchFormGroup.controls.demandId),e.xp6(3),e.Q6J("inputFormControl",o.searchFormGroup.controls.countryId),e.xp6(1),e.Q6J("formControl",o.searchFormGroup.controls.countryId)("options",o.countries),e.xp6(3),e.Q6J("inputFormControl",o.searchFormGroup.controls.employerId),e.xp6(1),e.Q6J("formControl",o.searchFormGroup.controls.employerId),e.xp6(9),e.Q6J("value",o.jobDataArr)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",e.DdM(21,N))("paginator",!0)("filterDelay",0)("globalFilterFields",e.DdM(22,P))("selection",o.selectedJobs),e.xp6(6),e.Q6J("formGroup",o.saveJobStatusFormGroup),e.xp6(1),e.Q6J("inputFormControl",o.saveJobStatusFormGroup.controls.reason))},dependencies:[i._Y,i.Fj,i.JJ,i.JL,i.oH,i.sg,i.u,C.jx,U.Hq,A.Lt,D.o,w.FN,u.iA,u.lQ,u.Ei,u.fz,u.UA,u.Mo,u.xl,x.g,c.KR,c.jZ,c.lC],styles:[".p-selectable-row[_ngcontent-%COMP%]:focus, .p-selectable-row[_ngcontent-%COMP%]:hover{background-color:#d3d3d3!important;outline:none!important}.p-selectable-row[_ngcontent-%COMP%]{cursor:pointer}"]}),a})();const M=[{path:"enable",pathMatch:"full",component:I,data:{status:l.Xef.ENABLE},resolve:[l.EGW]},{path:"disable",pathMatch:"full",component:I,data:{status:l.Xef.DISABLE},resolve:[l.EGW]}];let Q=(()=>{var r;class a{}return(r=a).\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[h.Bz.forChild(M),h.Bz]}),a})(),q=(()=>{var r;class a{}return(r=a).\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[Z.ez,i.UX,Q,J.g,c.uR]}),a})()}}]);