"use strict";(self.webpackChunke_migrate=self.webpackChunke_migrate||[]).push([[613],{699:(A,x,i)=>{i.d(x,{O:()=>g});var t=i(1571),d=i(4325),e=i(6895),c=i(2498);function C(s,m){if(1&s&&(t.TgZ(0,"div",2),t._UZ(1,"pdf-viewer",3),t.qZA()),2&s){const u=t.oxw();t.xp6(1),t.Q6J("src",u.documentData)("rotation",0)("original-size",!1)("show-all",!0)("fit-to-page",!1)("zoom",1)("zoom-scale","page-width")("stick-to-page",!1)("render-text",!0)("external-link-target","blank")("autoresize",!0)("show-borders",!1)}}function U(s,m){if(1&s&&(t.TgZ(0,"div",2),t._UZ(1,"pdf-viewer",3),t.qZA()),2&s){const u=t.oxw();t.xp6(1),t.Q6J("src",u.documentData)("rotation",0)("original-size",!1)("show-all",!0)("fit-to-page",!1)("zoom",1)("zoom-scale","page-width")("stick-to-page",!1)("render-text",!0)("external-link-target","blank")("autoresize",!0)("show-borders",!1)}}function D(s,m){if(1&s&&(t.TgZ(0,"div",2),t._UZ(1,"img",4),t.qZA()),2&s){const u=t.oxw();t.xp6(1),t.s9C("src",u.documentData,t.LSH)}}function T(s,m){if(1&s&&(t.TgZ(0,"div",2),t._UZ(1,"img",4),t.qZA()),2&s){const u=t.oxw();t.xp6(1),t.s9C("src",u.documentData,t.LSH)}}function Z(s,m){if(1&s&&(t.TgZ(0,"div",2),t._UZ(1,"img",4),t.qZA()),2&s){const u=t.oxw();t.xp6(1),t.s9C("src",u.documentData,t.LSH)}}function F(s,m){if(1&s&&(t.TgZ(0,"div",2),t._UZ(1,"img",4),t.qZA()),2&s){const u=t.oxw();t.xp6(1),t.s9C("src",u.documentData,t.LSH)}}function f(s,m){if(1&s&&(t.TgZ(0,"div",2),t._UZ(1,"img",4),t.qZA()),2&s){const u=t.oxw();t.xp6(1),t.s9C("src",u.documentData,t.LSH)}}function p(s,m){if(1&s&&(t.TgZ(0,"div",2),t._UZ(1,"img",4),t.qZA()),2&s){const u=t.oxw();t.xp6(1),t.s9C("src",u.documentData,t.LSH)}}let g=(()=>{var s;class m{constructor(v){this.config=v}ngOnInit(){this.documentData=this.config.data.feDocuments?.changingThisBreaksApplicationSecurity,this.type=this.config.data.type}}return(s=m).\u0275fac=function(v){return new(v||s)(t.Y36(d.S))},s.\u0275cmp=t.Xpm({type:s,selectors:[["emigrate-view-docs"]],decls:9,vars:9,consts:[[1,"container",3,"ngSwitch"],["class","content",4,"ngSwitchCase"],[1,"content"],[1,"viewDoc",3,"src","rotation","original-size","show-all","fit-to-page","zoom","zoom-scale","stick-to-page","render-text","external-link-target","autoresize","show-borders"],[3,"src"]],template:function(v,y){1&v&&(t.TgZ(0,"div",0),t.YNc(1,C,2,12,"div",1),t.YNc(2,U,2,12,"div",1),t.YNc(3,D,2,1,"div",1),t.YNc(4,T,2,1,"div",1),t.YNc(5,Z,2,1,"div",1),t.YNc(6,F,2,1,"div",1),t.YNc(7,f,2,1,"div",1),t.YNc(8,p,2,1,"div",1),t.qZA()),2&v&&(t.Q6J("ngSwitch",y.type),t.xp6(1),t.Q6J("ngSwitchCase","pdf"),t.xp6(1),t.Q6J("ngSwitchCase","application/pdf"),t.xp6(1),t.Q6J("ngSwitchCase","png"),t.xp6(1),t.Q6J("ngSwitchCase","jpg"),t.xp6(1),t.Q6J("ngSwitchCase","jpeg"),t.xp6(1),t.Q6J("ngSwitchCase","image/png"),t.xp6(1),t.Q6J("ngSwitchCase","image/jpg"),t.xp6(1),t.Q6J("ngSwitchCase","image/jpeg"))},dependencies:[e.RF,e.n9,c.rQ],styles:[".viewDoc[_ngcontent-%COMP%]{min-height:600px}"]}),m})()},1385:(A,x,i)=>{i.r(x),i.d(x,{MyWorkListModule:()=>f});var t=i(6895),d=i(3599),e=i(2967),c=i(1571);const C=[{path:"upload-files",pathMatch:"full",component:e.V},{path:"notification",loadChildren:()=>Promise.all([i.e(8592),i.e(9180)]).then(i.bind(i,9180)).then(p=>p.NotificationModule)}];let U=(()=>{var p;class g{}return(p=g).\u0275fac=function(m){return new(m||p)},p.\u0275mod=c.oAB({type:p}),p.\u0275inj=c.cJS({imports:[d.Bz.forChild(C),d.Bz]}),g})();var D=i(1358),T=i(6270),Z=i(4006),F=i(5593);let f=(()=>{var p;class g{}return(p=g).\u0275fac=function(m){return new(m||p)},p.\u0275mod=c.oAB({type:p}),p.\u0275inj=c.cJS({imports:[t.ez,U,D.uR,T.g,Z.u5,Z.UX,F.hJ]}),g})()},2967:(A,x,i)=>{i.d(x,{V:()=>j});var t=i(2976),d=i(1358),e=i(1571),c=i(4006);let C=(()=>{var n;class r{constructor(o){this.fb=o}createArnForm(o){return this.fb.group({arn:this.fb.control({value:null,disabled:o},c.kI.compose([c.kI.required,d.YO.arnNumberValidator()]))})}createDocumentForm(o){return this.fb.group({applicationName:this.fb.control({value:null,disabled:!0},c.kI.required),documentType:this.fb.control({value:null,disabled:o},c.kI.required),uplaodDocument:this.fb.control(null,c.kI.required)})}}return(n=r).\u0275fac=function(o){return new(o||n)(e.LFG(c.qu))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),r})();var U=i(805),D=i(655),T=i(8513),Z=i(7579),F=i(8505),f=i(262),p=i(2843),g=i(529);let s=(()=>{var n;class r extends t.zSs{constructor(o){super(o)}getDocumentType(){return this.http.get(`${this.DEV_API_URL}/admin/documenttype`).pipe((0,f.K)(o=>(0,p._)(()=>o)))}validateArnNumber(o){return this.http.get(`${this.DEV_API_URL}/fr/myworklist/details/${o}`).pipe((0,f.K)(a=>(0,p._)(()=>a)))}submitDocument(o){return this.http.post(`${this.DEV_API_URL}/fr/myworklist/upload`,o).pipe((0,f.K)(a=>(0,p._)(()=>a)))}}return(n=r).\u0275fac=function(o){return new(o||n)(e.LFG(g.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),r})();var m;class u{constructor(r){this.updateDocumentService=r,this.subject=new Z.x}documentType(){return this.updateDocumentService.getDocumentType().pipe((0,F.b)(r=>{}),(0,f.K)(r=>{throw r}))}validateArnNumber(r){return this.updateDocumentService.validateArnNumber(r).pipe((0,F.b)(l=>{}),(0,f.K)(l=>{throw l}))}submitDocument(r){return this.updateDocumentService.submitDocument(r).pipe((0,F.b)(l=>{}),(0,f.K)(l=>{throw l}))}}(m=u).\u0275fac=function(r){return new(r||m)(e.LFG(s))},m.\u0275prov=e.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),(0,D.gn)([(0,T.PS)()],u.prototype,"documentType",null),(0,D.gn)([(0,T.PS)()],u.prototype,"validateArnNumber",null),(0,D.gn)([(0,T.PS)()],u.prototype,"submitDocument",null);var v=i(6945),y=i(3599),w=i(6895),N=i(5593),I=i(1740),J=i(2453);class E{deserialize(r){return Object.assign(this,r),this}}var L=i(699),_=i(4325),z=i(1481),Q=i(2210);const M=["fileUploadReference"];function Y(n,r){1&n&&(e.TgZ(0,"div")(1,"span",14),e._uU(2,"The value is required"),e.qZA()())}let O=(()=>{var n;class r extends d.H6{constructor(o,a,h,S,b,X,B){super(a),this.formHelpService=o,this.UploadfilesService=h,this.sessionQuery=S,this.uiService=b,this.dialogService=X,this.sanitizer=B,this.pageInstructionText=t.Xef.PAGE_INSTRUCTION_TEXT,this.maxFileSize=t.Xef.MAX_FILE_SIZE,this.documentTypeList=[],this.uploadFile=new e.vpe,this.documents=[]}ngOnInit(){this.loginUsername=this.sessionQuery.user,this.uploaDocumentForm=this.formHelpService.createDocumentForm(!1),this.getDocumentTypes(),this.arnDetails&&this.arnDetails.data&&this.uploaDocumentForm.patchValue({applicationName:this.arnDetails.data.feId+" "+this.arnDetails.data.applicantName})}getDocumentTypes(){this.UploadfilesService.documentType().subscribe(o=>{this.documentTypeList=o},o=>{this.uiService.hideSpinner(),this.showErrorToast(o)})}getSelectedDocument(o){this.selectedDocumentId=o.value.id,this.shortName=o.value.shortName}documentData(o,a){if(o)switch(o.action){case t.Xef.ACTION.ADD:this.uploaDocumentForm.controls.uplaodDocument.setValue((new E).deserialize({id:o.data.id,fileName:o.data.name,file:o.data.file,fileType:o.data.name.split(".")[1],size:o.data.size,extension:o.data.extension}));break;case t.Xef.ACTION.REMOVE:this.uploaDocumentForm.controls.uplaodDocument.setValue(null);break;case t.Xef.ACTION.VIEW:this.showFile(this.uploaDocumentForm.controls.uplaodDocument.value)}}submit(){if(this.uploaDocumentForm.markAllAsTouched(),this.uploaDocumentForm.valid){const o={arn:this.arnDetails.data.arn,demandId:this.arnDetails.data.demandId,role:this.loginUsername.role,userName:this.loginUsername.loginUsername,fileName:this.uploaDocumentForm.controls.uplaodDocument.value.fileName?this.uploaDocumentForm.controls.uplaodDocument.value.fileName:"",base64Data:this.uploaDocumentForm.controls.uplaodDocument.value.file?this.uploaDocumentForm.controls.uplaodDocument.value.file:"",fileExtension:this.uploaDocumentForm.controls.uplaodDocument.value.extension?this.uploaDocumentForm.controls.uplaodDocument.value.extension:"",fileSize:this.uploaDocumentForm.controls.uplaodDocument.value.size?this.uploaDocumentForm.controls.uplaodDocument.value.size:"",shortName:this.shortName?this.shortName:""};this.uiService.showSpinner(),this.UploadfilesService.submitDocument(o).subscribe(a=>{a.status.toLowerCase()==t.Xef.SUCCESS?(this.uiService.hideSpinner(),this.showSuccessToast(a?.message),this.uploadFile.emit(!0)):(this.uiService.hideSpinner(),this.showErrorToast(a?.message))},a=>{this.uiService.hideSpinner(),this.showErrorToast(a?.error?.message)})}else this.showErrorToast("Please fill the mandatory fields")}cancel(){this.uploadFile.emit(!1)}showFile(o){this.dialogService.open(L.O,{header:o.fileName,width:"80%",contentStyle:{overflow:"auto"},baseZIndex:1e4,maximizable:!0,data:{feDocuments:this.sanitizer.bypassSecurityTrustUrl(`data:${o.fileType};base64,${o.file}`),type:o.fileType}})}}return(n=r).\u0275fac=function(o){return new(o||n)(e.Y36(C),e.Y36(U.ez),e.Y36(u),e.Y36(t.U_o),e.Y36(v.n),e.Y36(_.xA),e.Y36(z.H7))},n.\u0275cmp=e.Xpm({type:n,selectors:[["emigrate-upload-document-file"]],viewQuery:function(o,a){if(1&o&&e.Gf(M,5),2&o){let h;e.iGM(h=e.CRH())&&(a.fileUploadReference=h.first)}},inputs:{arnDetails:"arnDetails"},outputs:{uploadFile:"uploadFile"},features:[e.qOj],decls:32,vars:11,consts:[[1,"row"],[3,"instructionsText"],[1,"border","p-3","mb-3"],[1,"content"],[1,"form"],[3,"pageSubTitle"],[3,"formGroup"],[1,"col-md-4","col-sm-6"],[1,"field"],["for","1","inputLabel","Applicant Name","inputId","applicationName",1,"block",3,"inputFormControl"],["id","applicationName","type","text","pInputText","","placeholder","",1,"w-100",3,"formControl"],["for","1","inputLabel","Document Type","inputId","documentType",1,"block",3,"inputFormControl"],["id","documentType","optionLabel","name","placeholder","Select an option","EmigrateShDropdown","",1,"w-100",3,"options","formControl","onChange"],[1,"col-md-4"],[1,"field-required"],[1,"col-md-6"],[3,"documentId","maxFileSize","uploadedFile"],["fileUploadReference",""],[4,"ngIf"],[1,"col-12"],[1,"buttons","mt-3"],["pButton","","type","cancel","label","Cancel",1,"btn-format","btn-blue","mr-2",3,"click"],["pButton","","type","submit","label","Submit",1,"btn-format","btn-blue",3,"click"]],template:function(o,a){1&o&&(e._UZ(0,"p-toast"),e.TgZ(1,"div",0),e._UZ(2,"emigrate-sh-page-instructions",1),e.qZA(),e.TgZ(3,"div",2)(4,"div",3)(5,"div",4),e._UZ(6,"emigrate-sh-page-sub-title",5),e.TgZ(7,"form",6)(8,"div",0)(9,"div",7)(10,"div",8)(11,"emigrate-sh-html-input",9),e._UZ(12,"input",10),e.qZA()()(),e.TgZ(13,"div",7)(14,"div",8)(15,"emigrate-sh-html-input",11)(16,"p-dropdown",12),e.NdJ("onChange",function(S){return a.getSelectedDocument(S)}),e.qZA()()()()(),e.TgZ(17,"div",0)(18,"div",13)(19,"span"),e._uU(20,"Please Upload the Document "),e.TgZ(21,"span",14),e._uU(22," *"),e.qZA()()(),e.TgZ(23,"div",15)(24,"emigrate-sh-file-upload",16,17),e.NdJ("uploadedFile",function(S){return a.documentData(S,"employment agreements registred with ministry of labour")}),e.qZA(),e.YNc(26,Y,3,0,"div",18),e.qZA()(),e.TgZ(27,"div",0)(28,"div",19)(29,"div",20)(30,"button",21),e.NdJ("click",function(){return a.cancel()}),e.qZA(),e.TgZ(31,"button",22),e.NdJ("click",function(){return a.submit()}),e.qZA()()()()()()()()),2&o&&(e.xp6(2),e.Q6J("instructionsText",a.pageInstructionText),e.xp6(4),e.Q6J("pageSubTitle","Upload Document"),e.xp6(1),e.Q6J("formGroup",a.uploaDocumentForm),e.xp6(4),e.Q6J("inputFormControl",a.uploaDocumentForm.controls.applicationName),e.xp6(1),e.Q6J("formControl",a.uploaDocumentForm.controls.applicationName),e.xp6(3),e.Q6J("inputFormControl",a.uploaDocumentForm.controls.documentType),e.xp6(1),e.Q6J("options",a.documentTypeList)("formControl",a.uploaDocumentForm.controls.documentType),e.xp6(8),e.Q6J("documentId",1)("maxFileSize",a.maxFileSize),e.xp6(2),e.Q6J("ngIf",a.uploaDocumentForm.controls.uplaodDocument.invalid&&a.uploaDocumentForm.controls.uplaodDocument.touched))},dependencies:[w.O5,d.KR,d.jZ,d.dB,d.Yr,d.lC,N.Hq,Q.Lt,I.o,J.FN,c._Y,c.Fj,c.JJ,c.JL,c.oH,c.sg]}),r})(),H=(()=>{var n;class r{}return(n=r).\u0275fac=function(o){return new(o||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["emigrate-status-screen"]],decls:8,vars:1,consts:[[1,"container","content","p-3","border","mt-2","mb-4"],[1,"container"],[1,"colour"],[1,"content"],[3,"pageSubTitle"],[1,"text-center"]],template:function(o,a){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e._UZ(4,"emigrate-sh-page-sub-title",4),e.TgZ(5,"h6",5),e._uU(6,"Document Uploaded Successfully"),e.qZA()(),e._UZ(7,"br"),e.qZA()()()),2&o&&(e.xp6(4),e.Q6J("pageSubTitle","Status"))},dependencies:[d.jZ]}),r})();function R(n,r){if(1&n){const l=e.EpF();e.TgZ(0,"div"),e._UZ(1,"emigrate-sh-page-title",1),e.TgZ(2,"div",2),e._UZ(3,"emigrate-sh-page-instructions",3),e.qZA(),e.TgZ(4,"div",4)(5,"div",5)(6,"div",6),e._UZ(7,"emigrate-sh-page-sub-title",7),e.TgZ(8,"form",8)(9,"div",2)(10,"div",9)(11,"div",10)(12,"emigrate-sh-html-input",11),e._UZ(13,"input",12),e.qZA()()()(),e.TgZ(14,"div",2)(15,"div",13)(16,"div",14)(17,"button",15),e.NdJ("click",function(){e.CHM(l);const a=e.oxw();return e.KtG(a.cancel())}),e.qZA(),e.TgZ(18,"button",16),e.NdJ("click",function(){e.CHM(l);const a=e.oxw();return e.KtG(a.getNextTab())}),e.qZA()()()()()()()()()}if(2&n){const l=e.oxw();e.xp6(1),e.Q6J("pageTitle","Upload Document"),e.xp6(2),e.Q6J("instructionsText",l.pageInstructionText),e.xp6(4),e.Q6J("pageSubTitle","Upload Document"),e.xp6(1),e.Q6J("formGroup",l.uploadArnForm),e.xp6(4),e.Q6J("inputFormControl",null==l.uploadArnForm||null==l.uploadArnForm.controls?null:l.uploadArnForm.controls.arn),e.xp6(1),e.Q6J("formControl",null==l.uploadArnForm?null:l.uploadArnForm.controls.arn)}}function V(n,r){if(1&n){const l=e.EpF();e.TgZ(0,"div")(1,"emigrate-upload-document-file",17),e.NdJ("uploadFile",function(a){e.CHM(l);const h=e.oxw();return e.KtG(h.changeStatus(a))}),e.qZA()()}if(2&n){const l=e.oxw();e.xp6(1),e.Q6J("arnDetails",l.arnDetails)}}function P(n,r){1&n&&(e.TgZ(0,"div"),e._UZ(1,"emigrate-status-screen"),e.qZA())}let j=(()=>{var n;class r extends d.H6{constructor(o,a,h,S,b){super(a),this.formHelpService=o,this.UploadfilesService=h,this.uiService=S,this.router=b,this.pageInstructionText=t.Xef.PAGE_INSTRUCTION_TEXT,this.documentTypeList=[],this.arnFlag=!0,this.showStatusFlag=!1,this.documentFlag=!1,this.arnDetails={}}ngOnInit(){this.uiService.initPageSetup([],""),this.uploadArnForm=this.formHelpService.createArnForm(!1)}getNextTab(){this.uploadArnForm.markAllAsTouched(),this.uploadArnForm.valid?(this.uiService.showSpinner(),this.UploadfilesService.validateArnNumber(this.uploadArnForm?.controls?.arn?.value).subscribe(o=>{this.uiService.hideSpinner(),this.arnDetails=o,this.arnDetails&&this.arnDetails.status.toLowerCase()==t.Xef.SUCCESS?(this.showSuccessToast(o?.message),this.arnFlag=!1,this.documentFlag=!0,this.showStatusFlag=!1):this.showErrorToast(o?.message)},o=>{this.uiService.hideSpinner(),this.showErrorToast(o)})):this.showErrorToast(t.rmt.TOAST_FILL_ALL_FIELDS)}changeStatus(o){o?(this.arnFlag=!1,this.documentFlag=!1,this.showStatusFlag=!0):(this.arnFlag=!0,this.documentFlag=!1,this.showStatusFlag=!1)}cancel(){this.router.navigate(["/admin/dashboard"])}}return(n=r).\u0275fac=function(o){return new(o||n)(e.Y36(C),e.Y36(U.ez),e.Y36(u),e.Y36(v.n),e.Y36(y.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["emigrate-upload-files"]],features:[e.qOj],decls:4,vars:3,consts:[[4,"ngIf"],[3,"pageTitle"],[1,"row"],[3,"instructionsText"],[1,"border","p-3","mb-3"],[1,"content"],[1,"form"],[3,"pageSubTitle"],[3,"formGroup"],[1,"col-md-4","col-sm-6"],[1,"field"],["for","1","inputLabel","Enter ARN","inputId","arn",1,"block",3,"inputFormControl"],["id","arn","type","text","pInputText","","placeholder"," Enter Reference Number",1,"w-100",3,"formControl"],[1,"col-12"],[1,"buttons"],["pButton","","type","cancel","label","Cancel",1,"btn-format","btn-blue","mr-2",3,"click"],["pButton","","type","next","label","Next",1,"btn-format","btn-blue",3,"click"],[3,"arnDetails","uploadFile"]],template:function(o,a){1&o&&(e._UZ(0,"p-toast"),e.YNc(1,R,19,6,"div",0),e.YNc(2,V,2,1,"div",0),e.YNc(3,P,2,0,"div",0)),2&o&&(e.xp6(1),e.Q6J("ngIf",a.arnFlag),e.xp6(1),e.Q6J("ngIf",a.documentFlag),e.xp6(1),e.Q6J("ngIf",a.showStatusFlag))},dependencies:[w.O5,d.KR,d.TM,d.jZ,d.dB,N.Hq,I.o,J.FN,c._Y,c.Fj,c.JJ,c.JL,c.oH,c.sg,O,H]}),r})()}}]);